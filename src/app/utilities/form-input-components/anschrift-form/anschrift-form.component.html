<ng-template #formTemplate>
  <div class="p-fluid grid" [formGroup]="internalFormGroup">
    <div class="p-field col-12 lg:col-3 md:col-6">
      <mkj-text-input label="Vorname" formControlName="vorname"></mkj-text-input>
    </div>
    <div class="p-field col-12 lg:col-3 md:col-6">
      <mkj-text-input label="Zuname" formControlName="zuname"></mkj-text-input>
    </div>
    <div class="p-field col-12 lg:col-3 md:col-6">
      <mkj-text-input label="Firma" formControlName="firma"></mkj-text-input>
    </div>
    <div class="p-field col-12 lg:col-3 md:col-6">
      <mkj-text-input label="Titel (vor)" formControlName="titelVor"></mkj-text-input>
    </div>
    <div class="p-field col-12 lg:col-3 md:col-6">
      <mkj-text-input label="Titel (nach)" formControlName="titelNach"></mkj-text-input>
    </div>
    <div class="p-field col-12 lg:col-3 md:col-6">
      <mkj-text-input label="StraÃŸe" formControlName="strasse"></mkj-text-input>
    </div>
    <div class="p-field col-12 lg:col-3 md:col-6">
      <mkj-text-input label="Hausnummer" formControlName="hausnummer"></mkj-text-input>
    </div>
    <div class="p-field col-12 lg:col-3 md:col-6">
      <mkj-text-input label="PLZ" formControlName="plz"></mkj-text-input>
    </div>
    <div class="p-field col-12 lg:col-3 md:col-6">
      <mkj-text-input label="Ort" formControlName="ort"></mkj-text-input>
    </div>
    <div class="p-field col-12 lg:col-3 md:col-6">
      <mkj-text-input label="Staat" formControlName="staat"></mkj-text-input>
    </div>
    <div class="p-field col-12 lg:col-3 md:col-6">
      <mkj-text-input label="E-Mail" formControlName="email"></mkj-text-input>
    </div>
    <div class="p-field col-12 lg:col-3 md:col-6">
      <mkj-text-input label="Telefonnummer" formControlName="telefonHaupt"></mkj-text-input>
    </div>
    <div class="p-field col-12 lg:col-3 md:col-6">
      <mkj-text-input label="Mobilnummer" formControlName="telefonMobil"></mkj-text-input>
    </div>
    <div class="p-field col-12 lg:col-3 md:col-6">
      <mkj-text-input label="IBAN" formControlName="IBAN"></mkj-text-input>
    </div>
    <div class="p-field col-12 lg:col-3 md:col-6">
      <mkj-text-input label="BIC" formControlName="BIC"></mkj-text-input>
    </div>
  </div>
</ng-template>

@if (mode === 'suggest') {
  <mkj-autocomplete
    label="Suchen"
    [value]="value"
    [datasource]="dataSource"
    [listConfig]="autoCompleteConfig"
    [showClear]="true"
    (click)="$event.stopPropagation()"
    (keydown)="$event.stopPropagation()"
    (valueChange)="setFromSuggestion($event)"
  ></mkj-autocomplete>
}
<p-accordion>
  <p-accordionTab>
    <ng-template pTemplate="header">
      <span class="flex align-items-center gap-2 w-full">
        <span class="font-bold white-space-nowrap">Adressdaten</span>
        @if (mode === 'suggest') {
          <mkj-autocomplete
            label="Suchen"
            [value]="value"
            [datasource]="dataSource"
            [listConfig]="autoCompleteConfig"
            [showClear]="true"
            (click)="$event.stopPropagation()"
            (keydown)="$event.stopPropagation()"
            (valueChange)="setFromSuggestion($event)"
          ></mkj-autocomplete>
        }
      </span>
    </ng-template>
    <ng-template [ngTemplateOutlet]="formTemplate"></ng-template>
  </p-accordionTab>
</p-accordion>

<div class="p-field col-12">
  @if (formControl?.errors && mode !== 'edit') {
    <p-messages
      [value]="formControl.errors | mkjFormError"
      [closable]="false"
      [enableService]="false"
      showTransitionOptions="0ms"
      hideTransitionOptions="0ms"
    ></p-messages>
  }
</div>
