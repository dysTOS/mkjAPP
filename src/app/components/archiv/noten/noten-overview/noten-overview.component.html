<mkj-list
  [datasource]="datasource"
  [configuration]="listConfig"
  [templateMap]="{
    rowexpansion: rowexpansion,
    bewertungTemplate: bewertungTemplate
  }"
  (onDoubleClick)="navigateToEditView($event)"
>
</mkj-list>

<ng-template #rowexpansion let-noten>
  @if (noten) {
    <mkj-display-model [model]="noten"></mkj-display-model>
  }
  <div *visibleFor="[PermissionMap.NOTEN_SAVE]" class="col-12 flex justify-content-center">
    <button
      pButton
      pRipple
      label="Bearbeiten"
      icon="pi pi-pencil"
      class="p-button-secondary p-button-rounded p-button-raised"
      (click)="navigateToEditView(noten)"
    ></button>
  </div>

  <div class="card">
    <mkj-comments [modelType]="'noten'" [modelId]="noten.id"></mkj-comments>
  </div>
</ng-template>

<ng-template #bewertungTemplate let-noten>
  @if (noten.bewertung != null) {
    <mkj-rating [value]="noten.bewertung" [readonly]="true"></mkj-rating>
  }
</ng-template>
